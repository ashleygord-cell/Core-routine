<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Core Routine</title>

  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#111111">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Core Routine">

  <style>
    :root { --pad: 14px; --radius: 14px; }
    body { font-family: -apple-system, system-ui, Segoe UI, Roboto, Arial, sans-serif; margin: 0; background: #f6f7fb; color: #111; }
    header { padding: 18px var(--pad); padding-top: calc(18px + env(safe-area-inset-top)); background: white; position: sticky; top: 0; box-shadow: 0 2px 12px rgba(0,0,0,.06); z-index: 10; }
    h1 { font-size: 18px; margin: 0 0 6px; }
    .sub { font-size: 13px; color: #555; margin: 0; }
    main { padding: var(--pad); max-width: 720px; margin: 0 auto; padding-bottom: calc(var(--pad) + env(safe-area-inset-bottom)); }
    .card { background: white; border-radius: var(--radius); padding: var(--pad); box-shadow: 0 2px 12px rgba(0,0,0,.06); margin-bottom: 12px; }
    .row { display: flex; align-items: flex-start; gap: 10px; }
    .row input[type="checkbox"] { width: 22px; height: 22px; margin-top: 2px; }
    .title { font-weight: 800; margin: 0; }
    .meta { margin: 6px 0 0; font-size: 13px; color: #444; line-height: 1.35; }
    .controls { display:flex; gap: 10px; flex-wrap: wrap; margin-top: 12px; }
    button { border: 0; border-radius: 12px; padding: 10px 12px; font-weight: 700; cursor: pointer; }
    .primary { background: #111; color: white; }
    .secondary { background: #e9ecf4; color: #111; }
    .danger { background: #ffe7e7; color: #7a0000; }
    .progress { display:flex; justify-content: space-between; align-items: center; gap: 10px; margin-top: 10px; }
    .bar { flex: 1; height: 10px; border-radius: 999px; background: #edf0f7; overflow: hidden; }
    .fill { height: 100%; width: 0%; background: #111; transition: width .2s ease; }
    .small { font-size: 12px; color: #555; }
    .pill { font-size: 12px; padding: 6px 10px; border-radius: 999px; background: #f1f3f9; color:#333; }
    .two { display:grid; grid-template-columns: 1fr 1fr; gap: 10px; }
    @media (max-width: 520px){ .two { grid-template-columns: 1fr; } }
    textarea { width:100%; border-radius:12px; border:1px solid #d7dbea; padding:12px; font-size:14px; }
    .setRow { display:flex; gap:10px; flex-wrap:wrap; margin-top:10px; }
    .setBtn { background:#f1f3f9; color:#111; }
    .setBtn.active { background:#111; color:#fff; }
  </style>
</head>

<body>
<header>
  <h1>Core Routine</h1>
  <p class="sub">Offline-ready. Checks + notes save on this iPhone.</p>

  <div class="progress">
    <div class="bar"><div class="fill" id="fill"></div></div>
    <span class="pill" id="pct">0%</span>
  </div>
  <p class="small" id="dateLine"></p>
</header>

<main>
  <div class="card">
    <p class="title">Today’s checklist</p>
    <p class="small" style="margin-top:6px;">Tap sets as you go, then check the item.</p>

    <div class="two" style="margin-top:12px;">
      <div>
        <div class="row">
          <input id="db" type="checkbox" />
          <div>
            <p class="title">Dead Bug</p>
            <p class="meta">3 sets × 6–8 slow reps/side<br>Exhale, ribs down, low back stays gently pressed</p>
            <div class="setRow" data-ex="db">
              <button class="setBtn" data-set="1">Set 1</button>
              <button class="setBtn" data-set="2">Set 2</button>
              <button class="setBtn" data-set="3">Set 3</button>
            </div>
          </div>
        </div>
      </div>

      <div>
        <div class="row">
          <input id="sp" type="checkbox" />
          <div>
            <p class="title">Side Plank</p>
            <p class="meta">3 sets × 20–30 sec/side<br>Head-to-heels line, no hip rotation</p>
            <div class="setRow" data-ex="sp">
              <button class="setBtn" data-set="1">Set 1</button>
              <button class="setBtn" data-set="2">Set 2</button>
              <button class="setBtn" data-set="3">Set 3</button>
            </div>
          </div>
        </div>
      </div>

      <div>
        <div class="row">
          <input id="bd" type="checkbox" />
          <div>
            <p class="title">Bird Dog</p>
            <p class="meta">3 sets × 6–8 reps/side<br>Slow, no hip twist, pause at reach</p>
            <div class="setRow" data-ex="bd">
              <button class="setBtn" data-set="1">Set 1</button>
              <button class="setBtn" data-set="2">Set 2</button>
              <button class="setBtn" data-set="3">Set 3</button>
            </div>
          </div>
        </div>
      </div>

      <div>
        <div class="row">
          <input id="pp" type="checkbox" />
          <div>
            <p class="title">Pallof Press</p>
            <p class="meta">3 sets × 8–12 reps/side (2-sec pause)<br>Resist rotation, hips square</p>
            <div class="setRow" data-ex="pp">
              <button class="setBtn" data-set="1">Set 1</button>
              <button class="setBtn" data-set="2">Set 2</button>
              <button class="setBtn" data-set="3">Set 3</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="controls">
      <button class="primary" id="doneBtn">Mark session complete</button>
      <button class="secondary" id="resetBtn">Reset today</button>
      <button class="danger" id="wipeBtn">Wipe all data</button>
    </div>

    <p class="small" style="margin-top:10px;">
      Sessions completed: <strong id="sessions">0</strong> · Last completed: <strong id="lastDone">—</strong>
    </p>
  </div>

  <div class="card">
    <p class="title" style="margin-bottom:8px;">Notes</p>
    <textarea id="notes" rows="5" placeholder="Optional: pain (0–10), what felt good/bad, any flare-ups..."></textarea>
  </div>

  <p class="small" style="text-align:center; margin: 18px 0 0;">
    Open in Safari → Share → Add to Home Screen.
  </p>
</main>

<script src="app.js"></script>
<script>
  if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("./service-worker.js");
  }
</script>
</body>
</html>
